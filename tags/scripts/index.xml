<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Scripts on PEPETD</title>
    <link>http://felipenogueira3d.com/tags/scripts/index.xml</link>
    <description>Recent content in Scripts on PEPETD</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>2017 by felipenogueira3d.com</copyright>
    <atom:link href="http://felipenogueira3d.com/tags/scripts/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Find Verts Weighted to Bone Function</title>
      <link>http://felipenogueira3d.com/posts/find-verts-weighted-to-bone-function/</link>
      <pubDate>Mon, 23 Mar 2015 12:31:28 -0700</pubDate>
      
      <guid>http://felipenogueira3d.com/posts/find-verts-weighted-to-bone-function/</guid>
      <description>&lt;p&gt;Here is a little function I wrote that will go through all selected meshes and find all the vertices weighted to a given bone. I had to write this to find all the meshes that had a specific bone in their skin mod, but not just that! I needed to know which of those meshes had verts weighted to this specific bone.&lt;/p&gt;

&lt;p&gt;The main task was to remove the influence of that bone from all meshes not necessarily remove the bone as the engine export strips out any bone that has no vertices weighted to it.&lt;/p&gt;

&lt;p&gt;There are also ways to get the influenced verts of selected bone by hand, but I needed a way to go through hundreds to thousands of meshes in a timely manner.&lt;/p&gt;

&lt;iframe src=&#34;https://player.vimeo.com/video/60972226&#34; width=&#34;640&#34; height=&#34;400&#34; frameborder=&#34;0&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
fn findWeightedVertsFn theBone =
(
    max modify mode
    clearListener()
    theAr = selection as array
    for obj in theAr do
    (
        select obj
        skinMods = getclassinstances Skin target:obj
        for s = 1 to skinMods.count where skinMods.count &gt; 0 do
        (
            skel = skinOps.getnumberbones skinMods[s]
            verts = skinOps.getNumberVertices skinMods[s]
            for x = 1 to skel do
            (
                If (skinOps.getBoneName skinMods[s] x 0) == theBone do
                (
                    skinOps.selectBone skinMods[s] x
                    skinOps.selectVerticesByBone skinMods[s]

                    selectedVerts = #()
                    for v = 1 to verts do
                    (
                        theVert = skinOps.IsVertexSelected skinMods[s] v
                        if theVert == 1 do append selectedVerts v
                    )

                    if selectedVerts.count &gt; 0 do
                    (
                        print (obj.name + &#34; has &#34; + (selectedVerts.count as string) + &#34; verts weighted to &#34; + theBone)
                    )
                )
            )
        )
    )
    clearselection()
)

/*
findWeightedVertsFn &#34;The Bone Name&#34;
*/
</description>
    </item>
    
  </channel>
</rss>