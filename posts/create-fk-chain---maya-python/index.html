<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="generator" content="Hugo 0.18.1" />

  <title>PEPETD</title>
  
  <link rel="canonical" href="https://felipenogueira3d.com/posts/create-fk-chain---maya-python/" />
  <link rel="stylesheet" href="https://felipenogueira3d.com/assets/main.bundle.css" />
</head>
<body>
  <div class="Header" role="banner">
    <div class="layout-widthDefault">
      <div class="SiteNav u-mt8">
  <ul class="SiteNav-links" role="navigation" aria-label="site navigation">
    
      <li class="SiteNav-item">
        <a class="SiteNav-link" href="/" title="Blog">Blog</a>
      </li>
    
      <li class="SiteNav-item">
        <a class="SiteNav-link" href="/projects" title="Projects">Projects</a>
      </li>
    
      <li class="SiteNav-item">
        <a class="SiteNav-link" href="/categories/development" title="Development">Development</a>
      </li>
    
      <li class="SiteNav-item">
        <a class="SiteNav-link" href="/categories/tutorials" title="Tutorials">Tutorials</a>
      </li>
    
      <li class="SiteNav-item">
        <a class="SiteNav-link" href="/demo-reel" title="Demo Reel">Demo Reel</a>
      </li>
    
      <li class="SiteNav-item">
        <a class="SiteNav-link" href="/about" title="About">About</a>
      </li>
    
  </ul>
</div>
      <div class="Header-branding u-mt8">
  
    <a class="Header-brandingText" href="https://felipenogueira3d.com/" title="PEPETD">PEPETD</a> 
  
</div>
      <div class="SocialNav">
  <ul class="SocialNav-links" role="navigation" aria-label="social navigation">
    
      <li class="SocialNav-item">
        <a class="SocialNav-link" href="https://twitter.com/pepetd3d" title="Twitter">
          <i class="fa fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
    
      <li class="SocialNav-item">
        <a class="SocialNav-link" href="https://github.com/pepetd" title="GitHub">
          <i class="fa fa-github-alt" aria-hidden="true"></i>
        </a>
      </li>
    
    
      <li class="SocialNav-item">
        <a class="SocialNav-link" href="https://www.youtube.com/user/TheDragoon" title="YouTube">
          <i class="fa fa-youtube-play" aria-hidden="true"></i>
        </a>
      </li>
    
    
      <li class="SocialNav-item">
        <a class="SocialNav-link" href="https://vimeo.com/pepetd" title="Vimeo">
          <i class="fa fa-vimeo" aria-hidden="true"></i>
        </a>
      </li>
    
    
    
      <li class="SocialNav-item">
        <a class="SocialNav-link" href="http://www.linkedin.com/in/pepetd" title="LinkedIn">
          <i class="fa fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
    
      <li class="SocialNav-item">
        <a class="SocialNav-link" href="mailto:felipe@felipenogueira3d.com" title="Email">
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </a>
      </li>
    
  </ul>
</div>

    </div>
  </div>


<div role="main">
  <div class="layout-widthDefault">
    <h1 class="Title u-mt16 u-mb0"><span class="Title-text">Create FK Chain - Maya Python</span></h1>

<ul class="MetaData">
  <li class="MetaData-item">
    <i class="fa fa-calendar-o" aria-hidden="true"></i>
    <span>March 23, 2015</span>
  </li>
  <li class="MetaData-item">
    <i class="fa fa-folder-open-o" aria-hidden="true"></i>
    <span>
  
  
  
  <a href="/categories/development">development</a>
</span>
  </li>
  <li class="MetaData-item">
    <i class="fa fa-tags" aria-hidden="true"></i>
    <span>
  
  
  
  <a href="/tags/development">development</a>, <a href="/tags/maya">maya</a>, <a href="/tags/python">python</a>, <a href="/tags/snippets">snippets</a>
</span>
  </li>
  <li class="MetaData-item">
    <i class="fa fa-clock-o" aria-hidden="true"></i>
    <span>2 min read</span>
  </li>
</ul>

<div class="markdown-text u-mt16">
  <p>Hey guys! first rigging script for python in maya! pretty simple, it creates a FK chain from selected joints with flags to align the controllers to world or to the Joint. Wrote this script to do Gainer&rsquo;s(Sasktel) spine rig in Maya ( I am re-rigging him in Maya.)</p>
# ------------------------------------------------------------------------------------------------------
# Rigging Modules
# -- Method Rigger (Maya)
#
# By: Felipe[PePeTD]Nogueira
# ------------------------------------------------------------------------------------------------------

## Imports
import maya
import maya.cmds as cmds

# Create FK Chain rig Module.
# createFKChain(world) - if left unchanged, world = True by default.
# -------------------------------------------------------------------
def createFKChain(world=True):
    ## Grab current selection (!warning this function works on any type of node).
    joints = cmds.ls(sl=True)
    locators = []
    circles = []
    groups = []
    counter = 0

    ## Goes through the newly created list of joints and creates a locator and controller
    ## for each node grouping and constrainning it all accordinly.
    for joint in joints:
        curPos = cmds.xform(joint, q=True, ws=True, t=True)

        ## Creates the locator at the position of the node, Centers its pivot, and freezes it.
        curLoc = cmds.spaceLocator(p=curPos)
        locators.append(curLoc)
        cmds.CenterPivot(curLoc)
        cmds.parent(curLoc, joint)
        cmds.makeIdentity(curLoc, apply=True, t=1, r=1, s=1)

        ## Creates the Circle shape at the position of the node and aligns it to the node depending
        ## on the state of (world) if true then aligns it to world if false the circle shapes will be
        ## aligned to the node(joint).

        ## Align the control curves to world or to each given node according to the state of (world).
        if world == True:
            curCircle = cmds.circle(nr=[0, 0, 1], r=1, c=curPos)
            circles.append(curCircle)
            cmds.CenterPivot(curCircle)
            cmds.makeIdentity(curCircle, apply=True, t=1, r=1, s=1)
            curGroup = cmds.duplicate(curCircle[0], rr=True, rc=True, po=True)
            curGroup[0] = cmds.rename(curGroup[0], (curGroup[0]+"_Grp"))
            groups.append(curGroup)
            cmds.parent(curCircle[0], curGroup[0])
        else:
            curCircle = cmds.circle(nr=[1, 0, 0], r=1)
            circles.append(curCircle)
            cmds.parent(curCircle[0], joint)
            cmds.CenterPivot(curCircle)
            cmds.makeIdentity(curCircle, apply=False, t=1, r=1, s=1)
            cmds.parent(curCircle[0], w=True)
            curGroup = cmds.duplicate(curCircle[0], rr=True, rc=True, po=True)
            curGroup[0] = cmds.rename(curGroup[0], (curGroup[0]+"_Grp"))
            groups.append(curGroup)
            cmds.parent(curCircle[0], curGroup[0])

        ## Checks to see if we are on the first node or not and does the appropriate tasks.
        if counter == 0:
            cmds.parent(curLoc[0], w=True)
            rigGroup = cmds.duplicate(curLoc[0], rr=True, rc=True, po=True)
            rigGroup[0] = cmds.rename(rigGroup[0], (rigGroup[0]+"_Grp"))
            cmds.parent(joint, rigGroup[0])
            cmds.parent(curLoc[0], rigGroup[0])
        else:
            cmds.parent(curLoc[0], locators[counter-1][0])
            cmds.parent(curGroup[0], circles[counter-1][0])

        ## Finally we parentContraint the joint to the locator.
        cmds.parentConstraint(curCircle[0], curLoc[0], mo=True)
        cmds.parentConstraint(curLoc[0], joint, mo=True)

        counter += 1

createFKChain(world=False)
## END.

</div>

<div class="disqus-comments u-mt16">
  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'disqus_short_name';
    var disqus_identifier = 'https:\/\/felipenogueira3d.com\/posts\/create-fk-chain---maya-python\/';
    var disqus_title = 'Create FK Chain - Maya Python';
    var disqus_url = 'https:\/\/felipenogueira3d.com\/posts\/create-fk-chain---maya-python\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  </div>
</div>

  <div class="Footer" role="contentinfo">
    <div class="layout-widthDefault">
      <div class="Footer-inner u-mt16 u-mb16">
        <ul class="Footer-links" role="navigation" aria-label="footer navigation">
          <li class="Footer-item">
            <a class="Footer-link" href="https://felipenogueira3d.com/index.xml" title="RSS"><i class="fa fa-rss" aria-hidden="true"></i></a>
          </li>
          <li class="Footer-item">
            <a class="Footer-link" href="/posts" title="Posts"><i class="fa fa-archive" aria-hidden="true"></i></a>
          </li>
        </ul>
        <span class="Footer-copy">Copyright &copy; 2017 by felipenogueira3d.com, All Rights Reserved.</span>
      </div>
    </div>
  </div>
  <script src="https://felipenogueira3d.com/assets/vendor.bundle.js"></script>
  <script src="https://felipenogueira3d.com/assets/main.bundle.js"></script>
</body>
</html>